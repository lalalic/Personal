<#macro init>
    <#import "/com/yy/app/cms/web/slavable.html" as slavable>
    <#include "/com/yy/app/cms/web/slavable.html">
    <@slavable.init/>
    <#assign this=this+{'model':'家政人员','slave':{'model':'点评.服务'}}>
</#macro>

<#macro postFields post>
	<table class="fields">
	    <tr><td>姓名<@required/></td><td><input name="title" value="${post.title!}"></td></tr>
	    <tr><td>身份信息</td><td>
	    	<select name="country"><@optionUI options=["中国","菲律宾","其他国家"] value=post.country /></select>
            <input name="iden" placeholder="身份证号(中国) 或 护照号(外国)">
            <input name="hometown" placeholder="籍贯(中国)"> 
            </td></tr>
        <tr><td>性别</td><td><@checkboxUI name="gender" options=['男','女'] values=[post.gender!'男'] /></td></tr> 
        <tr><td>大概出生</td><td>
            <select name="bodYear">
                <#local theYear=.now?string('yyyy')?number>
                <@optionUI options=(theYear-20)..(theYear-50) value=((post.bodYear)!(theYear-30))?string />
            </select>
            </td></tr> 
        <tr><td>服务内容</td><td><@checkboxUI name="services" options=['照管宝宝','照管宝妈','洗衣','做饭','打扫卫生','催奶按摩'] values=post.services! /></td></tr>     
        <tr><td>介绍</td><td><@editor name="content" content=post.content! /></td></tr> 
	</table>
</#macro>

<#macro show1Fields post>
	<div>
	   <table class="fields">
        <tr><td>姓名</td><td>${post.title!}</td></tr>
        <tr><td>身份信息</td><td>
            ${post.gender!'男'},来自${post.country!} ${post.hometown!}
            <#if post.iden!?has_content>
                <#local len=post.iden?length>
                ,身份证号(中国) 或 护照号(外国): ${post.iden?substring(len-3,len-1)}
            </#if>
            </td></tr>
             <tr><td>服务</td><td><#list post.services! as service>${service} </#list></td></tr>
        </table>
        <#if post.content!?has_content>
            <p class="postcontent">${post.content!}</p>
        </#if>
        <#if user.isAdmin()><@authorInfo post/></#if>
   	</div>
   	<@slavePost post/>
</#macro>

<#macro slavePostFields parent>
	<input type="hidden" name="parent" value="${parent.ID}">    
	<table class="fields">
	    <tr><td>标题<@required/></td><td><input style="width:80%" name="title" required></td></tr>
	    <tr><td>点评</td><td style="text-align:center">
	        <div class="clearfix"><@ratingInputUI name="generalRating" title="总体" /></div>
	        <#list parent.services! as service>
	           <@ratingInputUI name="therating" title="${service}"/>
	        </#list>
	       </td></tr>
	    <tr><td>服务内容<@required/></td><td><@editor name="content">title="服务内容" minlength=200 </@editor></td></tr>
	</table>
</#macro>

<#macro show1SlaveFields slave>
	<div>
		<p><b>${slave.title}--</b><span  class="postcontent">${slave.content}</span></p>
	     <#if user.isAdmin()><@authorInfo slave/></#if>
    </div>
</#macro>

<#macro rateDetail post>
    <div class="ratingShow span-11 box" id="rating${post.ID}" style="display:none">
        <#local services=post.services!>
        <#local rating=post.serviceRating!>
        <#list services as service>
            <@ratingInputUI value=rating[service]!0 title="${service}"/>
        </#list>
    </div>
</#macro>