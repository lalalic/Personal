<#--
show:
    -showList
        -action4List, filter4List
        -vote, authorInfo
    -show1 (show1Fields[, show1Extra])
    -showSerial
post:
    -postForm (postFields)
-->
<#macro showList>
	<ol class="list">
		<#list posts as post>
		<li class="arrow"><a href="/${path}/show/${post.ID}.shtml">${post.title}</a></li>
		</#list>
	</ol>
	<#assign footerNavMacroName='action4List'>
</#macro>

<#macro action4List>
	<a data-icon="plus" href="/${path}/create.html">创建</a>
	<a data-icon="search" href="/${path}/">查询</a>
</#macro>

<#macro show1>
	<div>
		<h1>${post.title}</h1>
		<div><@authorInfo post.author/></div>
		<hr/>
		<div>${post.content}</div>
	</div>
	<@show1Extra post/>
	<#assign footerNavMacroName='action41'>
</#macro>

<#macro show1Extra post>
</#macro>

<#macro action41 post>
	<@favoriteCMD post/>
	<a data-icon="comment" href="/comment/list/${post.ID}.html">评论</a>
</#macro>

<#macro favoriteCMD post>
	<a data-icon="star" data-count="${post.favorites}" href="#"
		onclick="var a=this;x('get','/${path}/favorite/${post.ID}',function(x){$$('span',a).innerHTML=x.responseText})">收藏</a>
</#macro>

<#macro postForm>
	<form action="/${path}/post" method="post" class="form">
		<input type="hidden" name="parent" value="${post.parent!0}">
        <input type="hidden" name="ID" value="${post.ID!0}">
        <@postFields post/>
	</form>
	<#assign footerNavMacroName='postFooterNav'>
</#macro>

<#macro postFooterNav>
	<a data-icon="save" href="#" onclick="$$('.active form').submit()"></a>
	<a data-icon="back" href="#" ></a>
</#macro>

<#macro postFields post>
	<fieldset>
		<label>标题</label>
		<input name="title" value="${post.title!}" required="required"/>
	</fieldset>
	
	<fieldset>
		<label>内容</label>
		<textarea name="content" required="required">${post.title!}</textarea>
	</fieldset>
	
	<fieldset>
		<label>标签</label>
		<input placeholder="11个月,发烧" name="tag" value="${post.tag!}">
	</fieldset>
</#macro>

<#macro authorInfo userID>
</#macro>
