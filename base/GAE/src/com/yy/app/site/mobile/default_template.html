<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="initial-scale=1.0, width=device-width, user-scalable=no"/>
		<meta name="HandheldFriendly" content="True" />
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />  
		<meta name="keywords" content="${keywords!}" />
		<title><#macro title>${titleContent!"Hi"}</#macro><@title/> - ${website.name}</title>
		<#noparse>
		<script>
			var 
			_l/*ocalStorage*/=localStorage,
			_c=function(key,tag){document.writeln('<'+tag+'>'+localStorage[key]+'</'+tag+'>')},
			_cf=function(k/*key*/,v/*ersion*/){_l[k]=window[k].innerHTML;document.cookie=k+"="+v}
		</script>
		</#noparse>
		<@link key="lungo" href="/lib/lungo.css" rel="stylesheet"/>
		<@link key="lungo.icon" href="/lib/lungo.icon.css" rel="stylesheet"/>
		<@link key="theme.lungo" href="/lib/theme.lungo.css" rel="stylesheet"/>	
		<@link key="base" version="1.0">
			section>header{border-radius:0;-webkit-border-radius:0}
			header nav input[type=text],footer nav input[type=text]{-webkit-user-select:auto!important;padding:10px; line-height:20px;}
			fieldset>legend{align:center}
			.unvisible {position:fixed;top:-100px}
			footer nav.groupbar{top:0px}
			footer nav.groupbar a{line-height:44px;height:44px!important}
			section > footer > nav > a.active{-webkit-box-shadow: inset 0 -3px 0 #0093d5;box-shadow: inset 0 -3px 0 #0093d5;}
		</@>
		<@script key="base" version="1.8.1">
			<#noparse>
			var
			$t/*emplate*/=function(k/*ey*/,d/*ata*/){document.writeln((k in $t&&$t[k]||($t[k]=Mustache.compile(k in this && this[k].innerHTML||_l[k])))(d))},
			$1=function(s/*elector*/,c/*ontext*/){return(c||document).querySelector(s)},
			$9=function(s,c){return(c||document).querySelectorAll(s)},
			e/*ncode*/=function(a){return a.replace(/[,\/\?\:@&=+\$#]/g,function(c){return '%'+(c+"").charCodeAt(0).toString(16)})},
			h/*tml*/=function(h/*tml*/,d,c){b=document;c=b.createElement("p");c.innerHTML=h;for(a=b.createDocumentFragment();b=c.firstChild;)a.appendChild(b);return a},
			_x=function(a){for(a=3;a--;)try{return new(XMLHttpRequest||ActiveXObject)(["Msxml2","Msxml3","Microsoft"][a]+".XMLHTTP")}catch(e){}},
			x=function(m/*ethod*/,u/*rl*/,c/*allback*/,d/*ata*/,x){with(x=_x())return onreadystatechange=function(){readyState^4||status^200||c(this)},open(m,u,c),send(d),x}
			</#noparse>
		</@>		
		<#macro head></#macro><@head/>
	</head>
 	<body class="app ${path!'home'} ${contentMacroName}">
		<@script key="mustache" src="/lib/mustache.js"/>		
 		<#macro content><@run contentMacroName!"_empty"/></#macro>
 		<#macro header><@run headerMacroName!"_empty"/></#macro>
 		<#macro footer><@run footerMacroName!"_empty"/></#macro>
 		<#macro aside><@run asideMacroName!"_empty"/></#macro>
 		<#macro body>
 			<section id="${path}_${contentMacroName}" data-url="${url}">
				<@header/>
				<article id="${path}_${contentMacroName}_1" class="active">
					<@content/>
				</article>
				<@footer/>
			</section>
			<@aside/>
			<@script key="quo" src="/lib/quo.${debug}js"/>
			<@script key="lungo" src="/lib/lungo.${debug}js" />
			<@script key="lungo.init"><#noparse>
				Quo.ajaxSettings.headers.xhr=1//identify section template
				Lungo.Router.History = (function(undefined) {//rewrite to use history API
					var lastSection=null,backedSection=null
					window.onpopstate=function(e,forward){
						if(!e.state||!'section' in e.state) return
						if((forward=!$1(e.state.section))){
							Lungo.Resource.load(location.href)
							Lungo.Boot.Data.init(e.state.section)
						}
						backedSection=lastSection
						Lungo.Router.section(e.state.section)
						if(backedSection && backedSection!=e.state.section && !forward)
							Lungo.dom(backedSection).remove()
					}
				    return {
				        add: function(section_id, url) {
					       	if((url=Lungo.dom(section_id).data('url')) && url!=location.href)
					       		history.pushState({section:section_id},null,url);
					       	else
					       		history.replaceState({section:section_id},document.title,location.href);
					       	lastSection=section_id
					     },
				        current: function() {
					         return history.state.section
					     },
				        removeLast: function(){}
				    };
				})();
				Quo.fn.__append=Quo.fn.append
				Quo.fn.append=function(value){
					var context=Quo.fn.__append.apply(this,arguments)
					if(Lungo.Core.toType(value)=="string" && /^\s*\<section/i.test(value)){/*ajax section; not public API*/
						for(var scripts=$9('script',$1('section:last-of-type')),i=scripts.length-1,sc;i>-1;i++){
							sc=scripts[i]
							document.write=document.writeln=function(v){
								sc.insertAdjacentHTML('afterEnd',v)
							}
							eval(sc.innerHTML)
						}
					}
					return context
				}
				Lungo.init({name:"home"})
			</#noparse></@>
		</#macro><@body/>
	</body>
</html>
<#global outputed=true>