<#--
1st testing:
    slave count is not correct
-->
<#macro init>
    <#import "/com/yy/app/cms/web/slavable.html" as slavable>
    <#include "/com/yy/app/cms/web/slavable.html">
    <@slavable.init/>
    <#assign this=this+{'model':'绘本','slave':{'model':'阅读心得'}}>
</#macro>

<#macro postFields post>
	<table class="fields">
	    <tr><td>绘本<@required/></td><td>
	    	<input name="title" required value="${post.title!}">
	    	<select name="language">
	    		<@listTag type="option" cat="Book.language" name="language" value=post.language!/>
	    	</select>
	    	<input name="alias" placeholder="译本/原版书名" value="${post.alias!}">
	        </td></tr>
	   
	    <tr><td>作者</td><td>
	    	<@listTag cat="Book.writer" name="writer" type="input" value=post.writer placeholder="赵一,钱二"/>
	    	<@listTag cat="Book.translator" name="translator" type="input" value=post.translator  placeholder="翻译:赵一,钱二"/>
	    	<@listTag cat="Book.publisher" name="publisher" type="input" multiple=false value=post.publisher  placeholder="出版商"/>
	    	</td></tr>
	    <tr><td>类型</td><td>
	    	<@listTag cat="Book.type" name="type" type="radio" value=post.type/>
	    	</td></tr>	
	    <tr><td>主题</td><td>
	    	<@listTag cat="Book.theme" name="theme" type="checkbox" value=post.theme chunk=5/>
	</table>
</#macro>

<#macro show1Fields post>
	<div>
	    <#local cols=0>   
		<table><tr>
			<#if post.writer!?has_content><td><b>作者</b> <@tagLink post.writer "writer" "xx写的${this.model}"/></a></td> <#local cols=cols+1></#if>
			<#if post.translator!?has_content><td><b>翻译</b> <@tagLink post.translator "translator" "xx翻译的${this.model}"/></td>  <#local cols=cols+1></#if>
			<#if post.publisher!?has_content><td><b>出版社</b> <@tagLink post.publisher "publisher" "xx发行的${this.model}"/></td>  <#local cols=cols+1></#if>
		</tr>
		<tr><td colspan="${cols}">
			<b>标签</b>
		    <#if post.type!?has_content> <@tagLink post.type "type" "xx"/></#if> 
		    <#if post.theme!?has_content><@tagLink post.theme "theme" "xx相关的${this.model}"/></#if></td></tr>
		</table>
   	</div>
   	<@slavePostForm post/>
</#macro>

<#macro slavePostFields slave>
	<input type="hidden" name="parent" value="${slave.parent}"> 
	<input type="hidden" name="ID" value="${slave.ID!0}">    
	<table class="fields">
	    <tr><td>题目<@required/></td><td><input style="width:80%" name="title" required value="${slave.title!}"></td></tr>
	    <tr><td>评分<@required/></td><td><@ratingInputUI name="generalRating" title="" value=slave.generalRating/></td></tr>
	    <tr><td>适龄</td><td><@listTag cat="Book.suitableAge" name="suitableAge" type="checkbox" value=slave.suitableAge!/></td></tr>
	    <tr><td>道具</td><td>推荐配合玩具/乐器/颜料/其它工具<br/>
	        <textarea name="tool" style="height:3em">${slave.tool!}</textarea>    
	    	</td></tr>
	   	<tr><td>内容<@required/></td><td><@editor name="content" content=slave.content!> title="内容" minlength="300"</@editor></td></tr>
	</table>
</#macro>

<#macro show1SlaveFields slave>
    <div><b>${slave.title}</b> <@authorInfo slave/></div>
    <hr/>
	<div>
	    <#if slave.suitableAge!?has_content>
	    	<b>适龄</b> <@tagLink slave.suitableAge "suitableAge" "适合xx的孩子的阅读分享"/>
	    </#if>
	    <#if slave.tool!?has_content>
	    	<b>道具</b> ${slave.tool}
	    </#if>
	    <p>${slave.content}</p>
    </div>
</#macro>